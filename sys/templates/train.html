{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Train</title>
    <meta charset=utf-8>
    <style type="text/css">
        textarea{width: 700px; height: 550px;}
    </style>
   <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <script src="{% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/echarts/echarts.min.js' %}"></script>
{#    <script src="{% static 'js/echarts/echarts.simple.min.js' %}"></script>#}
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

</head>
<body id="home" data-scroll-animation="true" data-spy="scroll" data-target="#pages_body">
<header class="main_header_area">
    <div class="container">
        <div class="header_menu">

    <nav class="navbar navbar-expand-lg">
        <a class="navbar-brand" href="{% url 'home' %}"><img src="{% static 'images/logo1.png' %}" alt=""><span style="color: black;">Information Science Terminology Recognition Platform</span></a>
        <div class="collapse navbar-collapse navbar_supported">
      <ul class="navbar-nav">
        <li>
            <a class="nav-link" href="{% url 'home' %}">Home</a>
        </li>
        <li>
            <a class="nav-link" href="{% url 'train' %}">Train</a>
        </li>
        <li>
            <a class="nav-link" href="{% url 'application' %}">Application</a>
        </li>
        <li>
            <a class="nav-link" href="{% url 'about_us' %}">About us</a>
        </li>
      </ul>
        </div>
    </nav>
        </div>
    </div>
</header>

<section class="education_area" id="education">
    <div class="container">
            <hr/>
            <br/>
            <br/>
<h1>Training Process</h1>
<p>Click the Start button to view the training process</p>
<br/>
<form action="/add_ajax/" method="get">
    <button type="button" id='sum' class="theme_btn btn">Start</button>
    <button type="button" id='stop' class="theme_btn btn">Stop</button>
    <br/>
        <br/>
    <div id='result'></div>
</form>
    </div>
</section>

<footer class="footer_area">
	<div class="container">
		<div class="footer_inner row">
		   <ul class="col-lg-12 col-md-6  col-sm-6 footer_menu">
                <li>
                    <a href="{% url 'home' %}">Home</a>
                </li>
                <li>
                    <a href="{% url 'train' %}">Train</a>
                </li>
                <li>
                    <a href="{% url 'application' %}">Application</a>
                </li>
                <li>
                    <a href="{% url 'about_us' %}">About us</a>
                </li>
		   </ul>
		</div>
	</div>
	<div class="copy_right">
		<p>Copyright &copy; 2023. NJU All rights reserved.</p>
	</div>
</footer>


<script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
<script>
{#    $(document).ready(function(){#}
{#      $("#sum").click(function(){#}
{#          var a = 0;#}
{#          $.ajax({#}
{#              url:"/add_ajax/",#}
{#              type:"POST",#}
{#              success:function(ret){#}
{#                  $('#result').html(ret);#}
{#              }#}
{#          });#}
{#          setInterval(refresh, 1000);#}
{#      });#}
{#    });#}
    var out_txt = "";
    var get_train_log = function () {
        $.ajax({
            type: 'GET',
            url: '/add_ajax/',
            success: function (response_data) {
                var t_log = response_data;
                if (t_log) {
{#                    t_log = t_log + "\n";#}
                    out_txt += t_log;
{#                    alert(out_txt);#}
                    $("#result").html("<textarea id=\"text\">" + out_txt + "</textarea>");
                    //实现控制TextArea滚动条自动滚动到最下部
                    document.getElementById("text").scrollTop=document.getElementById("text").scrollHeight;
                }
            }
        })
    };
    stop_flag = 0;
    var ajax_polling = function () {
        stop_flag = setInterval(get_train_log, 1000);
    };
    $("#sum").click(function() {
        $(ajax_polling());
    });
    $("#stop").click(function() {
        clearInterval(stop_flag);
    });


</script>

<!-- jQuery v3.3.1 -->
<script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
<!-- Bootstrap v4.0.0 -->
<script src="{% static 'js/popper.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<!-- Rev slider js -->
<script src="{% static 'vendors/revolution/js/jquery.themepunch.tools.min.js' %}"></script>
<script src="{% static 'vendors/revolution/js/jquery.themepunch.revolution.min.js' %}"></script>
<script src="{% static 'vendors/revolution/js/extensions/revolution.extension.actions.min.js' %}"></script>
<script src="{% static 'vendors/revolution/js/extensions/revolution.extension.slideanims.min.js' %}"></script>
<script src="{% static 'vendors/revolution/js/extensions/revolution.extension.layeranimation.min.js' %}"></script>
<script src="{% static 'vendors/revolution/js/extensions/revolution.extension.navigation.min.js' %}"></script>
<script src="{% static 'vendors/revolution/js/extensions/revolution.extension.kenburn.min.js' %}"></script>
<script src="{% static 'vendors/revolution/js/extensions/revolution.extension.video.min.js' %}"></script>
<!-- Extra Plugin -->
<script src="{% static 'vendors/animate-css/wow.min.js' %}"></script>
<!-- Contact From js -->
<script src="{% static 'js/contact.js' %}"></script>
<script src="{% static 'js/jquery.validate.min.js' %}"></script>
<!-- isotope js -->
<script src="{% static 'vendors/isotope/imagesloaded.pkgd.min.js' %}"></script>
<script src="{% static 'vendors/isotope/isotope.pkgd.min.js' %}"></script>
<!-- Contact From js -->
<script src="http://ditu.google.cn/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
<script src="{% static 'js/gmaps.min.js' %}"></script>

<!-- Theme js / Custom js -->
<script src="{% static 'js/theme.js' %}"></script>
</body>
</html>